# Generated by CMake: "uninstall" target helper.
#
# This script removes files listed in install_manifest.txt, which is produced by
# `cmake --install <build-dir>`.
#
# It respects the DESTDIR environment variable (common in packaging workflows).

if(NOT EXISTS "@CMAKE_CURRENT_BINARY_DIR@/install_manifest.txt")
  message(FATAL_ERROR "Cannot find install_manifest.txt in: @CMAKE_CURRENT_BINARY_DIR@")
endif()

file(READ "@CMAKE_CURRENT_BINARY_DIR@/install_manifest.txt" _manifest)
string(REPLACE "\r" "" _manifest "${_manifest}")
string(REPLACE "\n" ";" _manifest "${_manifest}")

foreach(_file IN LISTS _manifest)
  if(_file STREQUAL "")
    continue()
  endif()

  set(_abs "$ENV{DESTDIR}${_file}")

  if(IS_SYMLINK "${_abs}" OR EXISTS "${_abs}")
    message(STATUS "Uninstalling: ${_abs}")
    execute_process(
      COMMAND "@CMAKE_COMMAND@" -E rm -f "${_abs}"
      RESULT_VARIABLE _rm_rc
      OUTPUT_QUIET
      ERROR_QUIET
    )
    if(NOT _rm_rc EQUAL 0)
      message(FATAL_ERROR "Failed to remove: ${_abs} (rc=${_rm_rc})")
    endif()
  else()
    message(STATUS "File does not exist (skipping): ${_abs}")
  endif()
endforeach()
